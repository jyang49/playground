pipeline {
  agent any 

  options {
    buildDiscarder(logRotator(numToKeepStr: '12'))
    timestamps() 
    retry(2)
  }

  parameters {
    string(name: 'hobby', description: 'favorite hobby', defaultValue: 'reading')
  }

  stages {
    stage('Build') { 
      steps {
        echo "build 1"
        echo "build 2"
      }
    }
    stage('Test') { 
      steps {
        echo "test 1"
        // error "fail the test"
        echo("test 2") // function format with ()
      }
    }
    stage('Deploy') { 
      steps {
        echo "deploy 1"
        echo "deploy 2"
      }
    }
  }
  post {
    always {
      echo "always executed"
    }
    success {
      echo "executed when success"
    }
    failure {
      echo "executed when failed"
    }
  }
}
